<!DOCTYPE html>
<html>
    <head>
        <meta charset="utf-8">
        <meta name="viewport" content="initial-scale=1, maximum-scale=1, user-scalable=no, width=device-width">
        <title>Gremlin Shell</title>
        <link rel="stylesheet" href="/static/material-icons.css">
        <link rel="stylesheet" href="/static/material.min.css">
        <script defer src="/static/material.min.js"></script>
        <style>
        .demo-layout-waterfall .mdl-layout__header-row .mdl-navigation__link:last-of-type  {
          padding-right: 0;
        }
        .card-wide {
            width: 90%;
            margin: 0 5% 20px 5%;
        }
        </style>
        <script src="/static/jquery.min.js"></script>
        <script src="/static/d3.js"></script>
        <script>
            var numero = 1;
            jQuery(document).on("change", "input.mdl-textfield__input", function() {
                numero++;
                var value = this.value;
                var card = jQuery(this).closest(".card-wide")
                var clone = card.clone();
                card.find("input.mdl-textfield__input")[0].outerHTML = "<span>" + value + "</span>";
                jQuery.get("/run", {query: value, pass: jQuery(".password").val()}).done(function(data) {
                    card.find(".result pre").html(JSON.stringify(data, null, 2));
                }).fail(function() {
                    card.find(".result pre").html("ERROR");
                }).always(function(){
                    card.parent().append(clone);
                    clone.find("input.mdl-textfield__input").val("").focus();
                    var title = clone.find(".mdl-card__title-text")
                    title.html(title.html().replace(/\d+/, numero));
                });
            });
        </script>
    </head>

<body class="mdl-demo mdl-color--grey-100 mdl-color-text--grey-700 mdl-base">
  <div class="demo-layout-waterfall mdl-layout mdl-js-layout">
    <header class="mdl-layout__header mdl-layout__header--waterfall">
      <!-- Top row, always visible -->
      <div class="mdl-layout__header-row">
        <!-- Title -->
        <h1 class="mdl-layout-title">Gremlin Shell</h1>
        <div class="mdl-layout-spacer"></div>
        <div class="mdl-textfield mdl-js-textfield mdl-textfield--expandable
                    mdl-textfield--floating-label mdl-textfield--align-right">
          <label class="mdl-button mdl-js-button mdl-button--icon"
                 for="waterfall-exp">
            <i class="material-icons">vpn_key</i>
          </label>
          <div class="mdl-textfield__expandable-holder">
            <input class="mdl-textfield__input password" type="password" name="sample"
                   id="waterfall-exp">
          </div>
        </div>
      </div>
      <!-- Bottom row, not visible on scroll -->
      <div class="mdl-layout__header-row">
        <div class="mdl-layout-spacer"></div>
      </div>
    </header>
    <div class="mdl-layout__drawer">
      <span class="mdl-layout-title">Title</span>
      <nav class="mdl-navigation">
        <a class="mdl-navigation__link" href="/graph">Graph</a>
      </nav>
    </div>
    <main class="mdl-layout__content">
      <div class="page-content">


<div class="card-wide mdl-card mdl-shadow--2dp">
  <div class="mdl-card__title">
    <h3 class="mdl-card__title-text">Query 1</h3>
  </div>
  <div class="mdl-card__supporting-text">
    <div class="mdl-textfield mdl-js-textfield">
        <input class="mdl-textfield__input" type="text" id="sample1" placeholder="Query">
    </div>
  </div>
  <div class="mdl-card__supporting-text mdl-card--border result">
    <pre>
    </pre>
  </div>
  <div class="mdl-card__menu">
    <button class="mdl-button mdl-button--icon mdl-js-button mdl-js-ripple-effect">
      <i class="material-icons">list</i>
    </button>
  </div>
</div>
      </div>
    </main>
  </div>
</body>
</html>
